[{"_path":"/blog/toute-la-puissance-d-un-pam-avec-boundary","_dir":"blog","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Explorez l'intégration puissante d'un Pam avec HashiCorp Boundary.","description":"Guide sur l'utilisation de HashiCorp Boundary avec Terraform sur AWS.","img":"/boundary.png","tags":["Security","pam","cloud","Infrastructure-as-code"],"createdAt":"2022-10-04T00:00:00.000Z","updatedAt":null,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HashiCorp Boundary est une puissante solution pour gérer l'accès aux systèmes en fonction des identités des utilisateurs. Dans ce guide, nous vous expliquerons comment configurer et intégrer HashiCorp Boundary avec Terraform sur AWS. À la fin de ce tutoriel, vous disposerez d'un déploiement Boundary fonctionnel sur AWS."}]},{"type":"element","tag":"h3","props":{"id":"prérequis"},"children":[{"type":"text","value":"Prérequis"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Avant de commencer, assurez-vous de disposer des éléments suivants :"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Des identifiants de compte AWS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Terraform installé sur votre machine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Une connaissance de base des services et concepts AWS"}]}]},{"type":"element","tag":"h3","props":{"id":"étape-1-mise-en-place-de-linfrastructure"},"children":[{"type":"text","value":"Étape 1 : Mise en place de l'infrastructure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pour créer l'infrastructure nécessaire sur AWS, nous utiliserons Terraform. Commencez par créer un nouveau répertoire pour vos fichiers Terraform et créez un fichier nommé "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":". Ouvrez ce fichier dans votre éditeur de texte préféré et configurez le fournisseur AWS :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"provider \"aws\" {\n  region = \"us-west-2\" # Remplacez par votre région AWS souhaitée\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"provider \"aws\" {\n  region = \"us-west-2\" # Remplacez par votre région AWS souhaitée\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enregistrez le fichier et exécutez "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"terraform init"}]},{"type":"text","value":" pour initialiser votre projet Terraform."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ensuite, créez un groupe de sécurité AWS pour permettre le trafic entrant vers le contrôleur Boundary et les instances de travail. Ajoutez le code suivant à "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"resource \"aws_security_group\" \"boundary\" {\n  name = \"boundary_sg\"\n\n  ingress {\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  ingress {\n    from_port   = 9200\n    to_port     = 9200\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"resource \"aws_security_group\" \"boundary\" {\n  name = \"boundary_sg\"\n\n  ingress {\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  ingress {\n    from_port   = 9200\n    to_port     = 9200\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"étape-2-provisionner-le-contrôleur-boundary"},"children":[{"type":"text","value":"Étape 2: Provisionner le contrôleur Boundary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Il est maintenant temps de provisionner l'instance du contrôleur Boundary. Ajoutez le code suivant à "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"resource \"aws_instance\" \"boundary_controller\" {\n  ami           = \"ami-0c55b159cbfafe1f0\" # Remplacez par l'ID AMI AWS souhaité\n  instance_type = \"t2.micro\"\n  key_name      = \"votre-paire-de-clés-ssh\" # Remplacez par le nom de votre paire de clés SSH\n  security_group_ids = [aws_security_group.boundary.id]\n\n  tags = {\n    Name = \"boundary-controller\"\n  }\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"resource \"aws_instance\" \"boundary_controller\" {\n  ami           = \"ami-0c55b159cbfafe1f0\" # Remplacez par l'ID AMI AWS souhaité\n  instance_type = \"t2.micro\"\n  key_name      = \"votre-paire-de-clés-ssh\" # Remplacez par le nom de votre paire de clés SSH\n  security_group_ids = [aws_security_group.boundary.id]\n\n  tags = {\n    Name = \"boundary-controller\"\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"N'oubliez pas de remplacer les valeurs "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ami"}]},{"type":"text","value":" et "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_name"}]},{"type":"text","value":" par les vôtres."}]},{"type":"element","tag":"h3","props":{"id":"étape-3-provisionner-le-worker-boundary"},"children":[{"type":"text","value":"Étape 3: Provisionner le worker Boundary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ensuite, provisionnons l'instance du worker Boundary. Ajoutez le code suivant à "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"resource \"aws_instance\" \"boundary_worker\" {\n  ami           = \"ami-0c55b159cbfafe1f0\" # Remplacez par l'ID AMI AWS souhaité\n  instance_type = \"t2.micro\"\n  key_name      = \"votre-paire-de-clés-ssh\" # Remplacez par le nom de votre paire de clés SSH\n  security_group_ids = [aws_security_group.boundary.id]\n\n  tags = {\n    Name = \"boundary-worker\"\n  }\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"resource \"aws_instance\" \"boundary_worker\" {\n  ami           = \"ami-0c55b159cbfafe1f0\" # Remplacez par l'ID AMI AWS souhaité\n  instance_type = \"t2.micro\"\n  key_name      = \"votre-paire-de-clés-ssh\" # Remplacez par le nom de votre paire de clés SSH\n  security_group_ids = [aws_security_group.boundary.id]\n\n  tags = {\n    Name = \"boundary-worker\"\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Encore une fois, n'oubliez pas de remplacer les valeurs "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ami"}]},{"type":"text","value":" et "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_name"}]},{"type":"text","value":" par les vôtres."}]},{"type":"element","tag":"h3","props":{"id":"étape-4-configuration-de-boundary"},"children":[{"type":"text","value":"Étape 4: Configuration de Boundary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Maintenant que nos instances sont provisionnées, nous devons configurer le contrôleur et le worker Boundary. Nous utiliserons le provisionneur "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"remote-exec"}]},{"type":"text","value":" de Terraform pour exécuter des commandes sur les instances."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ajoutez le code suivant à "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"provisioner \"remote-exec\" {\n  connection {\n    type        = \"ssh\"\n    user        = \"ec2-user\"\n    private_key = file(\"~/chemin-vers-votre/cle-privee.pem\") # Remplacez par le chemin vers votre clé privée SSH\n    host        = aws_instance.boundary_controller.public_ip\n  }\n\n  inline = [\n    \"sudo echo 'deb http://pkg.boundaryproject.io/apt/ any-arch main' | sudo tee /etc/apt/sources.list.d\n/boundary.list\",\n    \"curl -sS https://pkg.boundaryproject.io/apt/key.gpg | sudo apt-key add -\",\n    \"sudo apt-get update\",\n    \"sudo apt-get -y install boundary-controller\"\n  ]\n}\n\nprovisioner \"remote-exec\" {\n  connection {\n    type        = \"ssh\"\n    user        = \"ec2-user\"\n    private_key = file(\"~/chemin-vers-votre/cle-privee.pem\") # Remplacez par le chemin vers votre clé privée SSH\n    host        = aws_instance.boundary_worker.public_ip\n  }\n\n  inline = [\n    \"sudo echo 'deb http://pkg.boundaryproject.io/apt/ any-arch main' | sudo tee /etc/apt/sources.list.d/boundary.list\",\n    \"curl -sS https://pkg.boundaryproject.io/apt/key.gpg | sudo apt-key add -\",\n    \"sudo apt-get update\",\n    \"sudo apt-get -y install boundary-worker\"\n  ]\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"provisioner \"remote-exec\" {\n  connection {\n    type        = \"ssh\"\n    user        = \"ec2-user\"\n    private_key = file(\"~/chemin-vers-votre/cle-privee.pem\") # Remplacez par le chemin vers votre clé privée SSH\n    host        = aws_instance.boundary_controller.public_ip\n  }\n\n  inline = [\n    \"sudo echo 'deb http://pkg.boundaryproject.io/apt/ any-arch main' | sudo tee /etc/apt/sources.list.d\n/boundary.list\",\n    \"curl -sS https://pkg.boundaryproject.io/apt/key.gpg | sudo apt-key add -\",\n    \"sudo apt-get update\",\n    \"sudo apt-get -y install boundary-controller\"\n  ]\n}\n\nprovisioner \"remote-exec\" {\n  connection {\n    type        = \"ssh\"\n    user        = \"ec2-user\"\n    private_key = file(\"~/chemin-vers-votre/cle-privee.pem\") # Remplacez par le chemin vers votre clé privée SSH\n    host        = aws_instance.boundary_worker.public_ip\n  }\n\n  inline = [\n    \"sudo echo 'deb http://pkg.boundaryproject.io/apt/ any-arch main' | sudo tee /etc/apt/sources.list.d/boundary.list\",\n    \"curl -sS https://pkg.boundaryproject.io/apt/key.gpg | sudo apt-key add -\",\n    \"sudo apt-get update\",\n    \"sudo apt-get -y install boundary-worker\"\n  ]\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assurez-vous de remplacer la valeur "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"private_key"}]},{"type":"text","value":" par le chemin de votre clé privée SSH."}]},{"type":"element","tag":"h3","props":{"id":"étape-5-finalisation-et-nettoyage"},"children":[{"type":"text","value":"Étape 5: Finalisation et nettoyage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enfin, ajoutez le code suivant à "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" pour nettoyer les ressources lorsque vous n'en avez plus besoin :"}]},{"type":"element","tag":"code","props":{"className":["language-hcl"],"code":"resource \"aws_key_pair\" \"example\" {\n  key_name   = \"votre-paire-de-clés-ssh\" # Remplacez par le nom souhaité de votre paire de clés SSH\n  public_key = file(\"~/chemin-vers-votre/cle-publique.pub\") # Remplacez par le chemin vers votre clé publique SSH\n}\n\nresource \"aws_eip\" \"nat\" {\n  instance = aws_instance.boundary_controller.id # ou aws_instance.boundary_worker.id, selon votre configuration\n  vpc      = true\n}\n\nresource \"null_resource\" \"ansible\" {\n  provisioner \"local-exec\" {\n    command = \"ansible-playbook -i ${aws_eip.nat.public_ip}, -u ec2-user --private-key ~/chemin-vers-votre/cle-privee.pem provision.yml\" # Remplacez par le chemin de votre playbook Ansible\n  }\n\n  depends_on = [\n    aws_instance.boundary_controller,\n    aws_instance.boundary_worker\n  ]\n}\n\n// Ajoutez le code suivant si vous voulez détruire automatiquement les ressources\nlifecycle {\n    prevent_destroy = true // Commentez ou supprimez cette ligne pour permettre la destruction des ressources\n}\n","language":"hcl","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"resource \"aws_key_pair\" \"example\" {\n  key_name   = \"votre-paire-de-clés-ssh\" # Remplacez par le nom souhaité de votre paire de clés SSH\n  public_key = file(\"~/chemin-vers-votre/cle-publique.pub\") # Remplacez par le chemin vers votre clé publique SSH\n}\n\nresource \"aws_eip\" \"nat\" {\n  instance = aws_instance.boundary_controller.id # ou aws_instance.boundary_worker.id, selon votre configuration\n  vpc      = true\n}\n\nresource \"null_resource\" \"ansible\" {\n  provisioner \"local-exec\" {\n    command = \"ansible-playbook -i ${aws_eip.nat.public_ip}, -u ec2-user --private-key ~/chemin-vers-votre/cle-privee.pem provision.yml\" # Remplacez par le chemin de votre playbook Ansible\n  }\n\n  depends_on = [\n    aws_instance.boundary_controller,\n    aws_instance.boundary_worker\n  ]\n}\n\n// Ajoutez le code suivant si vous voulez détruire automatiquement les ressources\nlifecycle {\n    prevent_destroy = true // Commentez ou supprimez cette ligne pour permettre la destruction des ressources\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assurez-vous de remplacer les valeurs "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_name"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"public_key"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"private_key"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command"}]},{"type":"text","value":" et autres valeurs pertinentes par vos propres valeurs."}]},{"type":"element","tag":"h3","props":{"id":"étape-6-déployez-et-exécutez-terraform"},"children":[{"type":"text","value":"Étape 6: Déployez et exécutez Terraform"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enregistrez le fichier "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.tf"}]},{"type":"text","value":" et, dans votre répertoire Terraform, exécutez "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"terraform apply"}]},{"type":"text","value":" pour créer l'infrastructure et provisionner les instances Boundary."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Une fois le déploiement Terraform terminé, vous disposerez d'un déploiement Boundary entièrement fonctionnel sur AWS. Vous pouvez accéder aux instances du contrôleur et du worker Boundary à l'aide des adresses IP publiques affichées dans la sortie Terraform."}]},{"type":"element","tag":"h3","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dans ce tutoriel, nous avons expliqué comment configurer HashiCorp Boundary sur AWS à l'aide de Terraform. Nous avons provisionné l'infrastructure, configuré le contrôleur et le worker Boundary, et créé les ressources AWS nécessaires. En suivant ce guide, vous disposez désormais d'une base solide pour gérer l'accès à vos systèmes à l'aide de HashiCorp Boundary."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"N'oubliez pas de gérer et sécuriser votre déploiement Boundary en suivant les bonnes pratiques, telles que l'utilisation de credentials sécurisés et la mise à jour régulière de votre système."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Bonne utilisation de Boundary !"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"prérequis","depth":3,"text":"Prérequis"},{"id":"étape-1-mise-en-place-de-linfrastructure","depth":3,"text":"Étape 1 : Mise en place de l'infrastructure"},{"id":"étape-2-provisionner-le-contrôleur-boundary","depth":3,"text":"Étape 2: Provisionner le contrôleur Boundary"},{"id":"étape-3-provisionner-le-worker-boundary","depth":3,"text":"Étape 3: Provisionner le worker Boundary"},{"id":"étape-4-configuration-de-boundary","depth":3,"text":"Étape 4: Configuration de Boundary"},{"id":"étape-5-finalisation-et-nettoyage","depth":3,"text":"Étape 5: Finalisation et nettoyage"},{"id":"étape-6-déployez-et-exécutez-terraform","depth":3,"text":"Étape 6: Déployez et exécutez Terraform"},{"id":"conclusion","depth":3,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:blog:toute-la-puissance-d-un-pam-avec-boundary.md","_source":"content","_file":"blog/toute-la-puissance-d-un-pam-avec-boundary.md","_extension":"md"}]